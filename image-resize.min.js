!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.imageResize=t():e.imageResize=t()}(this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}o.d(t,"a",function(){return i});var i=function e(t){n(this,e),this.onCreate=function(){},this.onDestroy=function(){},this.onUpdate=function(){},this.overlay=t.overlay,this.img=t.img,this.options=t.options,this.requestUpdate=t.onUpdate}},function(e,t,o){"use strict";t.a={modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",padding:"3px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}}},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o.d(t,"a",function(){return l});var s=o(0),l=function(e){function t(){var e,o,r,s;n(this,t);for(var l=arguments.length,a=Array(l),u=0;u<l;u++)a[u]=arguments[u];return o=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.onCreate=function(){r.display=document.createElement("div"),Object.assign(r.display.style,r.options.displayStyles),r.overlay.appendChild(r.display)},r.onDestroy=function(){},r.onUpdate=function(){if(r.display&&r.img){var e=r.getCurrentSize();if(r.display.innerHTML=e.join(" &times; "),e[0]>120&&e[1]>30)Object.assign(r.display.style,{right:"4px",bottom:"4px",left:"auto"});else if("right"==r.img.style.float){var t=r.display.getBoundingClientRect();Object.assign(r.display.style,{right:"auto",bottom:"-"+(t.height+4)+"px",left:"-"+(t.width+4)+"px"})}else{var o=r.display.getBoundingClientRect();Object.assign(r.display.style,{right:"-"+(o.width+4)+"px",bottom:"-"+(o.height+4)+"px",left:"auto"})}}},r.getCurrentSize=function(){return[r.img.width,Math.round(r.img.width/r.img.naturalWidth*r.img.naturalHeight)]},s=o,i(r,s)}return r(t,e),t}(s.a)},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}o.d(t,"a",function(){return l});var s=o(0),l=function(e){function t(){var e,o,r,s;n(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return o=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.call(r),s=o,i(r,s)}return r(t,e),t}(s.a),a=function(){var e=this;this.onCreate=function(){e.boxes=[],e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.positionBoxes()},this.onDestroy=function(){e.setCursor("")},this.positionBoxes=function(){var t=-parseFloat(e.options.handleStyles.width)/2+"px",o=-parseFloat(e.options.handleStyles.height)/2+"px";[{left:t,top:o},{right:t,top:o},{right:t,bottom:o},{left:t,bottom:o}].forEach(function(t,o){Object.assign(e.boxes[o].style,t)})},this.addBox=function(t){var o=document.createElement("div");Object.assign(o.style,e.options.handleStyles),o.style.cursor=t,o.style.width=e.options.handleStyles.width+"px",o.style.height=e.options.handleStyles.height+"px",o.addEventListener("mousedown",e.handleMousedown,!1),e.overlay.appendChild(o),e.boxes.push(o)},this.handleMousedown=function(t){e.dragBox=t.target,e.dragStartX=t.clientX,e.preDragWidth=e.img.width||e.img.naturalWidth,e.setCursor(e.dragBox.style.cursor),e.throttleDrag=e.throttle(e.handleDrag,100),document.addEventListener("mousemove",e.throttleDrag,!1),document.addEventListener("mouseup",e.handleMouseup,!1)},this.handleMouseup=function(){e.setCursor(""),document.removeEventListener("mousemove",e.throttleDrag),document.removeEventListener("mouseup",e.handleMouseup)},this.throttle=function(e,t){var o=null,n=Date.now();return function(){var i=Date.now(),r=t-(i-n),s=this,l=arguments;clearTimeout(o),r<=0?(e.apply(s,l),n=Date.now()):o=setTimeout(function(){e.apply(s,l)},r)}},this.handleDrag=function(t){if(e.img){var o=t.clientX-e.dragStartX;e.dragBox===e.boxes[0]||e.dragBox===e.boxes[3]?e.img.width=Math.round(e.preDragWidth-o):e.img.width=Math.round(e.preDragWidth+o),e.requestUpdate()}},this.setCursor=function(t){[document.body,e.img].forEach(function(e){e.style.cursor=t})}}},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.imports.parchment,o=new t.Attributor.Style("float","float"),s=new t.Attributor.Style("margin","margin"),l=new t.Attributor.Style("display","display");return function(e){function t(){var e,r,u,d;n(this,t);for(var f=arguments.length,h=Array(f),y=0;y<f;y++)h[y]=arguments[y];return r=u=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(h))),u.onCreate=function(){u.toolbar=document.createElement("div"),Object.assign(u.toolbar.style,u.options.toolbarStyles),u.overlay.appendChild(u.toolbar),u._defineAlignments(),u._addToolbarButtons()},u.onDestroy=function(){},u.onUpdate=function(){},u._defineAlignments=function(){u.alignments=[{icon:a.a,apply:function(){l.add(u.img,"inline"),o.add(u.img,"left"),s.add(u.img,"0 1em 1em 0")},isApplied:function(){return"left"==o.value(u.img)}},{icon:c.a,apply:function(){l.add(u.img,"block"),o.remove(u.img),s.add(u.img,"auto")},isApplied:function(){return"auto"==s.value(u.img)}},{icon:p.a,apply:function(){l.add(u.img,"inline"),o.add(u.img,"right"),s.add(u.img,"0 0 1em 1em")},isApplied:function(){return"right"==o.value(u.img)}}]},u._addToolbarButtons=function(){var e=[];u.alignments.forEach(function(t,n){var i=document.createElement("span");e.push(i),i.innerHTML=t.icon,i.addEventListener("click",function(){e.forEach(function(e){return e.style.filter=""}),t.isApplied()?(o.remove(u.img),s.remove(u.img),l.remove(u.img)):(u._selectButton(i),t.apply()),u.requestUpdate()}),Object.assign(i.style,u.options.toolbarButtonStyles),n>0&&(i.style.borderLeftWidth="0"),Object.assign(i.children[0].style,u.options.toolbarButtonSvgStyles),t.isApplied()&&u._selectButton(i),u.toolbar.appendChild(i)})},u._selectButton=function(e){e.style.filter="invert(20%)"},d=r,i(u,d)}return r(t,e),t}(f.a)}t.a=s;var l=o(7),a=o.n(l),u=o(6),c=o.n(u),d=o(8),p=o.n(d),f=o(0)},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=e.Quill,i=e.defaultsDeep,u=o.i(l.a)(t),c={DisplaySize:s.a,Toolbar:u,Resize:a.a};return function e(o){var s=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this.initializeModules=function(){s.removeModules(),s.modules=s.moduleClasses.map(function(e){return new(c[e]||e)(s)}),s.modules.forEach(function(e){e.onCreate()}),s.onUpdate()},this.onUpdate=function(){s.repositionElements(),s.modules.forEach(function(e){e.onUpdate()})},this.removeModules=function(){s.modules.forEach(function(e){e.onDestroy()}),s.modules=[]},this.handleClick=function(e){if(e.target&&e.target.tagName&&"IMG"===e.target.tagName.toUpperCase()){if(s.img===e.target)return;s.img&&s.hide(),s.show(e.target)}else s.img&&s.hide()},this.show=function(e){s.img=e,s.showOverlay(),s.initializeModules()},this.showOverlay=function(){s.overlay&&s.hideOverlay(),s.quill.setSelection(null),s.setUserSelect("none"),document.addEventListener("keyup",s.checkImage,!0),s.quill.root.addEventListener("input",s.checkImage,!0),s.overlay=document.createElement("div"),Object.assign(s.overlay.style,s.options.overlayStyles),s.quill.root.parentNode.appendChild(s.overlay),s.repositionElements()},this.hideOverlay=function(){s.overlay&&(s.quill.root.parentNode.removeChild(s.overlay),s.overlay=void 0,document.removeEventListener("keyup",s.checkImage),s.quill.root.removeEventListener("input",s.checkImage),s.setUserSelect(""))},this.repositionElements=function(){if(s.overlay&&s.img){var e=s.quill.root.parentNode,t=s.img.getBoundingClientRect(),o=e.getBoundingClientRect();Object.assign(s.overlay.style,{left:t.left-o.left-1+e.scrollLeft+"px",top:t.top-o.top+e.scrollTop+"px",width:t.width+"px",height:t.height+"px"})}},this.hide=function(){s.hideOverlay(),s.removeModules(),s.img=void 0},this.setUserSelect=function(e){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach(function(t){s.quill.root.style[t]=e,document.documentElement.style[t]=e})},this.checkImage=function(e){s.img&&(46!=e.keyCode&&8!=e.keyCode||t.find(s.img).deleteAt(0),s.hide())},this.quill=o;var a=!1;l.modules&&(a=l.modules.slice()),this.options=i({},l,r.a),!1!==a&&(this.options.modules=a),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=o(1),s=o(2),l=o(4),a=o(3)},function(e,t){e.exports='<svg viewbox="0 0 18 18">\n  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>\n  <line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line>\n  <line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line>\n</svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18">\n  <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line>\n  <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line>\n  <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line>\n</svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18">\n  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>\n  <line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line>\n  <line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line>\n</svg>'}])});